<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.ProEliteClassMapper">
    <resultMap id="BaseResultMap" type="models.ProEliteClass">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" jdbcType="CHAR" property="id"/>
        <result column="class_type" jdbcType="VARCHAR" property="classType"/>
        <result column="term" jdbcType="VARCHAR" property="term"/>
        <result column="teacher_name" jdbcType="VARCHAR" property="teacherName"/>
        <result column="assistant_teacher_name" jdbcType="VARCHAR" property="assistantTeacherName"/>
        <result column="begin_time" jdbcType="BIGINT" property="beginTime"/>
        <result column="train_place" jdbcType="VARCHAR" property="trainPlace"/>
        <result column="train_days" jdbcType="INTEGER" property="trainDays"/>
        <result column="trainee_num" jdbcType="INTEGER" property="traineeNum"/>
        <result column="report_localtion" jdbcType="VARCHAR" property="reportLocaltion"/>
        <result column="creator_id" jdbcType="CHAR" property="creatorId"/>
        <result column="create_time" jdbcType="BIGINT" property="createTime"/>
        <result column="modifier_id" jdbcType="CHAR" property="modifierId"/>
        <result column="modify_time" jdbcType="BIGINT" property="modifyTime"/>
        <result column="ts" jdbcType="BIGINT" property="ts"/>
        <result column="dr" jdbcType="CHAR" property="dr"/>

        <result column="mobile_no" jdbcType="VARCHAR" property="mobileNo"/>
        <result column="relation_name" jdbcType="VARCHAR" property="relationName"/>
        <result column="qr_code_url" jdbcType="VARCHAR" property="qrCodeUrl"/>


        <result column="report_time" jdbcType="BIGINT" property="reportTime"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, class_type, term, teacher_name, begin_time, train_place, train_days, trainee_num,
        report_localtion, creator_id, create_time, modifier_id, modify_time, ts, dr,assistant_teacher_name,report_time,mobile_no,relation_name,qr_code_url
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from pro_elite_class
        where id = #{id,jdbcType=CHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from pro_elite_class
        where id = #{id,jdbcType=CHAR}
    </delete>
    <insert id="insert" parameterType="models.ProEliteClass">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into pro_elite_class (id, class_type, term,
        teacher_name, begin_time, train_place,
        train_days, trainee_num, report_localtion,
        creator_id, create_time, modifier_id,
        modify_time, ts, dr,assistant_teacher_name,report_time)
        values (#{id,jdbcType=CHAR}, #{classType,jdbcType=VARCHAR}, #{term,jdbcType=VARCHAR},
        #{teacherName,jdbcType=VARCHAR}, #{beginTime,jdbcType=BIGINT}, #{trainPlace,jdbcType=VARCHAR},
        #{trainDays,jdbcType=INTEGER}, #{traineeNum,jdbcType=INTEGER}, #{reportLocaltion,jdbcType=VARCHAR},
        #{creatorId,jdbcType=CHAR}, #{createTime,jdbcType=BIGINT}, #{modifierId,jdbcType=CHAR},
        #{modifyTime,jdbcType=BIGINT}, #{ts,jdbcType=BIGINT}, #{dr,jdbcType=CHAR},
        #{assistantTeacherName,jdbcType=VARCHAR},#{reportTime,jdbcType=BIGINT})
    </insert>
    <insert id="insertSelective" parameterType="models.ProEliteClass">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into pro_elite_class
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="classType != null">
                class_type,
            </if>
            <if test="term != null">
                term,
            </if>
            <if test="teacherName != null">
                teacher_name,
            </if>
            <if test="assistantTeacherName != null">
                assistant_teacher_name,
            </if>
            <if test="beginTime != null">
                begin_time,
            </if>
            <if test="trainPlace != null">
                train_place,
            </if>
            <if test="trainDays != null">
                train_days,
            </if>
            <if test="traineeNum != null">
                trainee_num,
            </if>
            <if test="reportLocaltion != null">
                report_localtion,
            </if>
            <if test="creatorId != null">
                creator_id,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="modifierId != null">
                modifier_id,
            </if>
            <if test="modifyTime != null">
                modify_time,
            </if>
            <if test="ts != null">
                ts,
            </if>
            <if test="dr != null">
                dr,
            </if>
            <if test="reportTime != null">
                report_time,
            </if>

            <if test="mobileNo != null">
                mobile_no,
            </if>
            <if test="relationName != null">
                relation_name,
            </if>
            <if test="qrCodeUrl != null">
                qr_code_url,
            </if>

        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=CHAR},
            </if>
            <if test="classType != null">
                #{classType,jdbcType=VARCHAR},
            </if>
            <if test="term != null">
                #{term,jdbcType=VARCHAR},
            </if>
            <if test="teacherName != null">
                #{teacherName,jdbcType=VARCHAR},
            </if>
            <if test="assistantTeacherName != null">
                #{assistantTeacherName,jdbcType=VARCHAR},
            </if>
            <if test="beginTime != null">
                #{beginTime,jdbcType=BIGINT},
            </if>
            <if test="trainPlace != null">
                #{trainPlace,jdbcType=VARCHAR},
            </if>
            <if test="trainDays != null">
                #{trainDays,jdbcType=INTEGER},
            </if>
            <if test="traineeNum != null">
                #{traineeNum,jdbcType=INTEGER},
            </if>
            <if test="reportLocaltion != null">
                #{reportLocaltion,jdbcType=VARCHAR},
            </if>
            <if test="creatorId != null">
                #{creatorId,jdbcType=CHAR},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=BIGINT},
            </if>
            <if test="modifierId != null">
                #{modifierId,jdbcType=CHAR},
            </if>
            <if test="modifyTime != null">
                #{modifyTime,jdbcType=BIGINT},
            </if>
            <if test="ts != null">
                #{ts,jdbcType=BIGINT},
            </if>
            <if test="dr != null">
                #{dr,jdbcType=CHAR},
            </if>
            <if test="reportTime != null">
                #{reportTime,jdbcType=CHAR},
            </if>

            <if test="mobileNo != null">
                #{mobileNo,jdbcType=VARCHAR},
            </if>

            <if test="relationName != null">
                #{relationName,jdbcType=VARCHAR},
            </if>
            <if test="qrCodeUrl != null">
                #{qrCodeUrl,jdbcType=VARCHAR},
            </if>

        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="models.ProEliteClass">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update pro_elite_class
        <set>
            <if test="classType != null">
                class_type = #{classType,jdbcType=VARCHAR},
            </if>
            <if test="term != null">
                term = #{term,jdbcType=VARCHAR},
            </if>
            <if test="teacherName != null">
                teacher_name = #{teacherName,jdbcType=VARCHAR},
            </if>
            <if test="assistantTeacherName != null">
                assistant_teacher_name = #{assistantTeacherName,jdbcType=VARCHAR},
            </if>
            <if test="beginTime != null">
                begin_time = #{beginTime,jdbcType=BIGINT},
            </if>
            <if test="trainPlace != null">
                train_place = #{trainPlace,jdbcType=VARCHAR},
            </if>
            <if test="trainDays != null">
                train_days = #{trainDays,jdbcType=INTEGER},
            </if>
            <if test="traineeNum != null">
                trainee_num = #{traineeNum,jdbcType=INTEGER},
            </if>
            <if test="reportLocaltion != null">
                report_localtion = #{reportLocaltion,jdbcType=VARCHAR},
            </if>
            <if test="creatorId != null">
                creator_id = #{creatorId,jdbcType=CHAR},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=BIGINT},
            </if>
            <if test="modifierId != null">
                modifier_id = #{modifierId,jdbcType=CHAR},
            </if>
            <if test="modifyTime != null">
                modify_time = #{modifyTime,jdbcType=BIGINT},
            </if>
            <if test="ts != null">
                ts = #{ts,jdbcType=BIGINT},
            </if>
            <if test="dr != null">
                dr = #{dr,jdbcType=CHAR},
            </if>
            <if test="reportTime != null">
                report_time = #{reportTime,jdbcType=CHAR},
            </if>

            <if test="mobileNo != null">
                mobile_no=#{mobileNo,jdbcType=VARCHAR},
            </if>
            <if test="relationName != null">
                relation_name=#{relationName,jdbcType=VARCHAR},
            </if>
            <if test="qrCodeUrl != null">
                qr_code_url=#{qrCodeUrl,jdbcType=VARCHAR},
            </if>


        </set>
        where id = #{id,jdbcType=CHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="models.ProEliteClass">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update pro_elite_class
        set class_type = #{classType,jdbcType=VARCHAR},
        term = #{term,jdbcType=VARCHAR},
        teacher_name = #{teacherName,jdbcType=VARCHAR},
        assistant_teacher_name = #{assistantTeacherName,jdbcType=VARCHAR},
        begin_time = #{beginTime,jdbcType=BIGINT},
        train_place = #{trainPlace,jdbcType=VARCHAR},
        train_days = #{trainDays,jdbcType=INTEGER},
        trainee_num = #{traineeNum,jdbcType=INTEGER},
        report_localtion = #{reportLocaltion,jdbcType=VARCHAR},
        creator_id = #{creatorId,jdbcType=CHAR},
        create_time = #{createTime,jdbcType=BIGINT},
        modifier_id = #{modifierId,jdbcType=CHAR},
        modify_time = #{modifyTime,jdbcType=BIGINT},
        ts = #{ts,jdbcType=BIGINT},
        dr = #{dr,jdbcType=CHAR},
        report_time = #{reportTime,jdbcType=CHAR}

        where id = #{id,jdbcType=CHAR}
    </update>

    <select id="getProEliteClasssByListPage" resultMap="BaseResultMap" parameterType="com.hht.interceptor.Page">
        select
        <include refid="Base_Column_List"/>
        from pro_elite_class
       <!-- <where>-->
        WHERE
            dr = "N"
            <if test="params.term != null">
                AND term like '%${params.term}%'
            </if>
            <if test="params.teacherName != null">
                AND teacher_name like '%${params.teacherName}%'
            </if>
            <if test="params.classType != null">
                AND class_type = #{params.classType,jdbcType=VARCHAR}
            </if>
           ORDER BY  create_time  DESC

        <!--   </where>-->

    </select>


    <select id="selectByMap" resultMap="BaseResultMap" parameterType="java.util.Map">
        select
        <include refid="Base_Column_List"/>
        from pro_elite_class
        where term = #{term,jdbcType=VARCHAR} and dr = "N"

    </select>

    <select id="getTermByEmployeeCode" resultMap="BaseResultMap" parameterType="java.util.Map">
        SELECT
        <include refid="Base_Column_List"/>
        FROM
        pro_elite_class ps
        WHERE
        ps.dr = 'N'
        AND ps.id IN (
        SELECT
        pro_elite_class_person.class_id
        FROM
        pro_elite_class_person
        WHERE
        employee_Code = #{employeeCode,jdbcType=VARCHAR}
        AND dr='N'
        AND result !='200'
        ) AND ps.class_type = #{classType,jdbcType=VARCHAR}
    </select>
    <select id="getClassByEmployeeCode" resultMap="BaseResultMap" parameterType="java.util.Map">
    SELECT
    term
    FROM
    pro_elite_class ps
    LEFT JOIN pro_elite_class_person pn ON ps.id = pn.class_id
    WHERE
    ps.dr = 'N'
    AND pn.dr = 'N' AND pn.result='300'
    AND  pn.employee_code=#{employeeCode,jdbcType=VARCHAR}
    AND ps.class_type=#{classType,jdbcType=VARCHAR}
  </select>
    <!--分页查询班级-->
    <select id="getClassByListPage" resultMap="BaseResultMap" parameterType="com.hht.interceptor.Page">
        SELECT
        id,
        term ,
        class_type,
        teacher_name,
        assistant_teacher_name,
        trainee_num
        FROM pro_elite_class
        WHERE
        dr = "N"
        AND
        class_type = #{params.classType,jdbcType=VARCHAR}

        <if test="params.term != null">
            AND term like '%${params.term}%'
        </if>
        <if test="params.teacherName != null">
            AND teacher_name like '%${params.teacherName}%'
        </if>
        <if test="params.assistantTeacher != null">
            AND assistant_teacher_name like '%${params.assistantTeacher}%'
        </if>

    </select>
    <insert id="setProEliteClass" parameterType="models.ProEliteClass">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into pro_elite_class (id, class_type, term,
        teacher_name, begin_time, train_place,
        train_days, trainee_num, report_localtion,
        creator_id, create_time, modifier_id,
        modify_time, ts, dr,assistant_teacher_name,report_time)
        values
        <foreach collection="list" item="item" index="index" separator=",">
            (#{item.id,jdbcType=CHAR}, #{item.classType,jdbcType=VARCHAR}, #{item.term,jdbcType=VARCHAR},
            #{item.teacherName,jdbcType=VARCHAR}, #{item.beginTime,jdbcType=BIGINT}, #{item.trainPlace,jdbcType=VARCHAR},
            #{item.trainDays,jdbcType=INTEGER}, #{item.traineeNum,jdbcType=INTEGER}, #{item.reportLocaltion,jdbcType=VARCHAR},
            #{item.creatorId,jdbcType=CHAR}, #{item.createTime,jdbcType=BIGINT}, #{item.modifierId,jdbcType=CHAR},
            #{item.modifyTime,jdbcType=BIGINT}, #{item.ts,jdbcType=BIGINT}, #{item.dr,jdbcType=CHAR},
            #{item.assistantTeacherName,jdbcType=VARCHAR},#{item.reportTime,jdbcType=BIGINT})
        </foreach>
    </insert>
    <!--分页查询班级-->
    <select id="getClassByClassType" resultMap="BaseResultMap" parameterType="models.ProEliteClass">
        SELECT
        id,
        term ,
        class_type,
        teacher_name,
        assistant_teacher_name,
        trainee_num
        FROM pro_elite_class
        WHERE
        dr = "N"
        AND
        class_type = #{classType,jdbcType=VARCHAR}
    </select>
</mapper>